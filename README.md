# ๐ MultiโServer SSH Monitor (Flask + Paramiko)

ุฏุงุดุจูุฑุฏ ุชุญุชโูุจ ุจุฑุง **ูุงูุชูุฑูฺฏ ู ูุฏุฑุช ฺูุฏ ุณุฑูุฑ ูููฺฉุณ ุงุฒ ุทุฑู SSH** ุจุง ุฑุงุจุท ูุงุฑุณ ู ุญุงูุช ุชุงุฑฺฉ.  
ูฺฺฏโูุง: ูุงูุชูุฑูฺฏ ุฒูุฏู CPU/RAM/Disk/Networkุ ูููุฏุงุฑูุงุ ุชุฑููุงู ุฒูุฏู ูุฑ ุณุฑูุฑุ **ุชุฑููุงู ฺฉู** (ุงุฌุฑุง ููุฒูุงู ุฑู ููู)ุ ุงูุฒูุฏู/ุญุฐู ุณุฑูุฑ ุงุฒ ุฏุงุฎู ูุจุ ุฐุฎุฑู ุชุงุฑุฎฺูุ ุณุงุนุช ุชูุฑุงู ู ุจุดุชุฑ.

---

## โจ ูุงุจูุชโูุง
- ูุงูุชูุฑูฺฏ ุฒูุฏู (RealโTime) ุจุฑุง:
  - CPU% ุRAM% ุDisk% (ูููุฏุงุฑ ููโุฏุงุฑู ุจุง ุจุฑฺุณุจโูุง CPU/RAM/Disk)
  - ูุฑุฎ ู ุญุฌู ุดุจฺฉู (RX/TX)
  - Load Average ู Uptime
- ูููุฏุงุฑูุง ุฎุท ู ููโุฏุงุฑู ุจุง Chart.js
- **ุชุฑููุงู ูุงู** ุจุฑุง ูุฑ ุณุฑูุฑ (SSE)
- **ุชุฑููุงู ฺฉู**: ุงุฌุฑุง ฺฉ ุฏุณุชูุฑ ุฑู ูููู ุณุฑูุฑูุง ุจูโุตูุฑุช ููุฒูุงู + ุงูฺฉุงู ุงุฑุณุงู ูุฑูุฏ ุจุนุฏ (ุชุนุงูู ุจุง ุงุณฺฉุฑูพุชโูุง)
- ูุฏุฑุช ุณุฑูุฑ: **Reboot / Shutdown**ุ **Restart Service**
- **ุงูุฒูุฏู/ุญุฐู ุณุฑูุฑ ุงุฒ ุฏุงุฎู ูุจ** (ุจุฏูู ูุฑุงุด ุฏุณุช ูุงู)
- ุฐุฎุฑู ุชุงุฑุฎฺูู ฺฉูุชุงูโูุฏุช ุฑู ุฏุณฺฉ (persist) ู ุจุงุฒุงุจ ุจุนุฏ ุงุฒ ุฑโุงุณุชุงุฑุช ุจุฑูุงูู
- ููุงุด ุณุงุนุช ุจุง **ููุทููู ุฒูุงู ุชูุฑุงู** (ูุณุชูู ุงุฒ ุชุงูโุฒูู ุณุณุชู)

---

## ๐ฆ ูพุดโูุงุฒูุง
- Python 3.8+
- ุงูุจููุชู 20.04/22.04/24.04 ุชูุตู ูโุดูุฏ
- ุฏุณุชุฑุณ SSH ุจู ุณุฑูุฑูุง (ุชุฑุฌุญุงู ุจุง **SSH Key**)

---

## ๐ ูุตุจ ุณุฑุน ุฑู ุงูุจููุชู
```bash
# ุงุจุฒุงุฑูุง ูพุงู
sudo apt update
sudo apt install -y python3 python3-venv python3-pip git

# ูุณุฑ ูุตุจ
sudo mkdir -p /opt/mssm && sudo chown $USER:$USER /opt/mssm
cd /opt/mssm

# ุฏุฑุงูุช ฺฉุฏ (ุฑูพู ุฎูุฏุชุงู ุฑุง ุฌุงฺฏุฒู ฺฉูุฏ)
git clone https://github.com/<USERNAME>/<REPO>.git .

# ูุญุท ูุฌุงุฒ ู ูุงุจุณุชฺฏโูุง
python3 -m venv .venv
source .venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt  # ุง: pip install Flask paramiko
```

### ๐งฉ ุณุงุฎุช ุชูุธูุงุช ุงููู (ูุงู ุฎุงู)
> ุฏุฑ ุงู ูพุฑูฺูุ **ูุงู `servers.json` ุจูโุตูุฑุช ุฎุงู** ุดุฑูุน ูโุดูุฏ ู ุดูุง **ุงุฒ ุฏุงุฎู ูุจ** ุณุฑูุฑูุง ุฑุง ุงุถุงูู ูโฺฉูุฏ.

`servers.json` (ูพุดโูุฑุถ ุฎุงู):
```json
{
  "poll_interval": 2,
  "admin_token": "CHANGE_ME_OR_REMOVE",
  "servers": []
}
```
- `admin_token`: ุงฺฏุฑ ููุฏุงุฑ ุจุฏูุฏุ ุนููุงุช ูุฏุฑุช (ุฑุจูุช/ุดุงุชโุฏุงูู/ุชุฑููุงู) ุชููุง ุจุง ุงู ุชูฺฉู ุงูุฌุงู ูโุดูุฏ. (ุฏุฑ UI ฺฉโุจุงุฑ ุงุฒ ุดูุง ูพุฑุณุฏู ูโุดูุฏ)
- `servers`: ุฎุงู ุจูุงูุฏุ ุณุฑูุฑูุง ุฑุง ุงุฒ ุจุฎุด ยซูุฏุฑุช ุณุฑูุฑูุงยป ุฏุฑ ุฏุงุดุจูุฑุฏ ุงุถุงูู ฺฉูุฏ.  
- ุญุชูุงู ูุทูุฆู ุดูุฏ ฺฉุงุฑุจุฑ ฺฉู ุณุฑูุณ ุฑุง ุงุฌุฑุง ูโฺฉูุฏ **ุงุฌุงุฒูู ููุดุชู ุฑู `servers.json`** ุฑุง ุฏุงุฑุฏ.

### โถ๏ธ ุงุฌุฑุง ุชุณุช
```bash
source /opt/mssm/.venv/bin/activate
python3 Multi-server-ssh-monitor.py
# ุณูพุณ ุฏุฑ ูุฑูุฑฺฏุฑ: http://127.0.0.1:8000
```
> ุจู ุตูุฑุช ูพุดโูุฑุถ ุฑู 127.0.0.1 ฺฏูุด ูโุฏูุฏ. ุฏุฑ ุตูุฑุช ูุงุฒ ูโุชูุงูุฏ host ุฑุง ุจู 0.0.0.0 ุชุบุฑ ุฏูุฏ ุง ูพุดุช Nginx ูุฑุงุฑ ุฏูุฏ.

---

## โป๏ธ ุงุฌุฑุง ูพุงุฏุงุฑ ุจุง systemd (ุจุนุฏ ุงุฒ ุฑุจูุช ูู ุจุงูุง ุจุงุฏ)
ฑ) ุณุฑูุณ ุจุณุงุฒุฏ:
```bash
sudo nano /etc/systemd/system/mssm.service
```
ูุญุชูุง:
```ini
[Unit]
Description=Multi-Server SSH Monitor
After=network-online.target
Wants=network-online.target

[Service]
Type=simple
User=YOUR_USER
Group=YOUR_USER
WorkingDirectory=/opt/mssm
Environment="PYTHONUNBUFFERED=1"
ExecStart=/opt/mssm/.venv/bin/python3 /opt/mssm/Multi-server-ssh-monitor.py
Restart=always
RestartSec=5

[Install]
WantedBy=multi-user.target
```
> `YOUR_USER` ุฑุง ุจุง ฺฉุงุฑุจุฑ ูุงูุน ุฌุงฺฏุฒู ฺฉูุฏ.  
> ุงุทููุงู ุญุงุตู ฺฉูุฏ `/opt/mssm/servers.json` ุจุฑุง ุงู ฺฉุงุฑุจุฑ writable ุจุงุดุฏ (ุจุฑุง ุงูุฒูุฏู/ุญุฐู ุณุฑูุฑ ุงุฒ UI).

ฒ) ูุนุงูโุณุงุฒ:
```bash
sudo systemctl daemon-reload
sudo systemctl enable mssm
sudo systemctl start mssm
```

ณ) ุจุฑุฑุณ ูุถุนุช ู ูุงฺฏ:
```bash
systemctl status mssm
journalctl -u mssm -f
```

---

## ๐ฅ ูุญูู ุงุณุชูุงุฏู (ุฏุงุดุจูุฑุฏ ูุจ)
- ูุฑูุฏ ุจู `http://127.0.0.1:8000`
- **ูุฏุฑุช ุณุฑูุฑูุง** โ ุงูุฒูุฏู ุณุฑูุฑ ุฌุฏุฏ (Name, Host, Port, Username, Password/KeyPath)
  - ุงุชุตุงู ุจุฑูุฑุงุฑ ุดุฏ โ ุณุฑูุฑ ุจู `servers.json` ุงุถุงูู ูโุดูุฏ ู ูุงูุชูุฑูฺฏ ุดุฑูุน ูโุดูุฏ
  - ุญุฐู ุณุฑูุฑ โ ุงุฒ UI ุงูุฌุงู ูโุดูุฏ ู ูุงู ุชูุธูุงุช ุจูโุฑูุฒุฑุณุงู ูโฺฏุฑุฏุฏ
- **ุชุฑููุงู ูุฑ ุณุฑูุฑ**: ุฏุณุชูุฑ ูุงุฑุฏ ฺฉูุฏ (Live ุจุฑุง ุฎุฑูุฌ ูุญุธูโุง)
- **ุชุฑููุงู ฺฉู**: ุฏุณุชูุฑ ุฑุง ุฑู ูููู ุณุฑูุฑูุง ููุฒูุงู ุงุฌุฑุง ฺฉูุฏุ ุจุงฺฉุณ ูุฑูุฏ ุจุฑุง ุงุฑุณุงูโูุง ุจุนุฏ ูุฌูุฏ ุฏุงุฑุฏ (ุจุฑุง ุงุณฺฉุฑูพุชโูุง ุชุนุงูู)
- **ูุฏุฑุช**: Reboot / Shutdown ู Restart Service
- **ุจุฑฺุณุจ ฺฏุฌโูุง**: ุฒุฑ ุณู ฺฏุฌ ููโุฏุงุฑู ุจุฑฺุณุจโูุง CPU / RAM / Disk ููุงุด ุฏุงุฏู ูโุดูุฏ
- **ุณุงุนุช**: ูุฏุฑ ููุดู ุจุง **ููุทูู ุฒูุงู ุชูุฑุงู** ููุงุด ุฏุงุฏู ูโุดูุฏ

---

## ๐ ูฺฉุงุช ุงููุช
- ุงู ุจุฑูุงูู ุจุฑุง ุงุฌุฑุง **ูุญู ุง ุดุจฺฉูู ุงูู** ุทุฑุงุญ ุดุฏูุ ุฏุฑ ุตูุฑุช ุงูุชุดุงุฑ ุฑู ุงูุชุฑูุชุ ุญุชูุงู ูพุดุช **Reverse Proxy + HTTPS** ูุฑุงุฑ ุฏูุฏ.
- ุงุฒ **SSH Key** ุจูโุฌุง ูพุณูุฑุฏ ุงุณุชูุงุฏู ฺฉูุฏุ ูุซุงู:
  ```bash
  ssh-keygen -t ed25519 -C "mssm"
  ssh-copy-id -i ~/.ssh/id_ed25519.pub root@SERVER_IP
  ```
  ุณูพุณ ุฏุฑ UI ููฺฏุงู ุงูุฒูุฏู ุณุฑูุฑุ ูุณุฑ ฺฉูุฏ ุฎุตูุต (ูุซูุงู `/home/USER/.ssh/id_ed25519`) ุฑุง ุจุฏูุฏ.
- ุงฺฏุฑ `admin_token` ุชูุธู ฺฉุฑุฏูโุงุฏุ ุขู ุฑุง ุงูู ูฺฏู ุฏุงุฑุฏ.

---

## โ ุฑูุน ุงุดฺฉุงู ุฑุงุฌ
- **ุงุชุตุงู ุจุฑูุฑุงุฑ ููโุดูุฏ** โ ูพูุฑุช 22ุ ูุงุฑูุงู ุณุฑูุฑ ููุตุฏ ู ุฏุณุชุฑุณ ฺฉุงุฑุจุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ.
- **Host key verification failed** โ ฺฉโุจุงุฑ ุฏุณุช `ssh user@host` ุจุฒูุฏ ุชุง ฺฉูุฏ ุฏุฑ `known_hosts` ุซุจุช ุดูุฏ.
- **ูพุณ ุงุฒ ุฑุจูุช ุฏุงุฏูโูุง ูููุฏุงุฑ ุตูุฑ ุดุฏ** โ persistence ูุนุงู ุงุณุชุ ูุณุฑ `./persist/` ุจุฑุฑุณ ุดูุฏ ู ุฏุณุชุฑุณ ููุดุชู ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ.

---

## ๐ ูุงุณูุณ
MIT

โ ุณุงุฎุชูโุดุฏู ุจุฑุง ูุงุฒูุง ูุงูุน ูุฏุฑุช ฺูุฏู ุณุฑูุฑุ ุจุง ุฑุงุจุท ูุงุฑุณ ู ุชุฌุฑุจูู ฺฉุงุฑุจุฑ ุฑูุงู.
